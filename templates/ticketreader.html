{% extends "base_generic.html" %}

{% block headstyle %}
    <style>
        .header {
            font-size: 14px;
        }

        .header .logoTop {
            margin-bottom: -108px;
        }

        .header .logoBottom {
            margin-top: -110px;
        }

        .Message-box {
            margin: 2%;
        }

        .reply-container textarea {
            width: 75%;
            height: 150px;
            padding: 12px 20px;
            box-sizing: border-box;
            border: 2px solid #AAAAAA;
            border-radius: 4px;
            background-color: #f8f8f8;
            resize: none;
            text-align: left;
            display: block;
            float: left;
        }

        .reply-container input {
            background-color: white;
            border: 2px solid #FFB757;
            color: black;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            -webkit-transition-duration: 0.4s; /* Safari */
            transition-duration: 0.4s;
            box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
            width: 25%;
            height: 50px;

        }

        .reply-container input:hover {
            text-decoration: none;
            background-color: #FFB757; /* Green */
            color: white;
            box-shadow: 0 12px 16px 0 rgba(0, 0, 0, 0.24), 0 17px 50px 0 rgba(0, 0, 0, 0.19);
        }

    </style>
{% endblock %}


{% block header %}
    <h1>SUPPORT<br>TICKETS</h1>
{% endblock %}

{% block content %}

    <div class="Message-box">

        <h2 style="text-align: center">Tickets:</h2>

        <!-- Tickets with a reply form attatched -->
        {% for ticket in tickets %}
            <form action="" method="post">
                {% csrf_token %}
                {{ form }}
                <h3 style="border-top: 2px black solid">{{ ticket.Title }}</h3>
                <p>"{{ ticket.Text }}"</p>
                <p style="text-align: right">-{{ ticket.Writer.getfullname }} from {{ ticket.Writer.rolegroup_primary }} on {{ ticket.InitDate }}</p>

                <!-- Renders Replies -->
                {% for reply in ticketreplies %}
                    {% if ticket.id == reply.Ticket.id %}
                        <div style="border: 1px black solid">
                        <h3 style="text-align: left">{{ reply.Writer.getfullname }} wrote:</h3>
                        <p>{{ reply.Text }}. <br></p> <p style="text-align: right">Date:{{ reply.InitDate }}</p>
                        </div>
                    {% endif %}
                {% endfor %}

                <div class="reply-container">
                    <input class="ticketobject" type="hidden" name="ticketobject" id="{{ ticket.id }}"
                           value="{{ ticket }}">
                    <textarea class="reply" id="reply" type="text" name="reply" value="{{ reply }}"
                              placeholder="Reply visible to the writer of the ticket." style="height: 50px;"
                              required></textarea>
                    <input class="button" type="submit" value="Submit">
                </div>
            </form>
        {% endfor %}
    </div>

{% endblock %}